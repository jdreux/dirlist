<!DOCTYPE html>  
<html>  
  	<head>  
    	<meta charset="utf-8">  
    	<title></title>
   		<style>
			
		</style>
  	</head>  
  	<body>  
    	<h1 id="h1"></h1>
		
		
		<table id="table">
			<tr>
				<th width="50%">
					<a id="sortByName" href="#sortby=name">Name</a>
				</th>
				<th>
					<a id="sortByLastModified" href="#sortby=lastmodified">Last modified</a>
				</th>
				<th>
					<a id="sortBySize" href="#sortby=size">Size</a>
				</th>			
			</tr>
			<tr>
				<td>
					<a href="../">Parent Directory<a>
				</td>
				<td></td>
				<td></td>
			</tr>
		</table>
  	</body>
	<script>
		var dir = !@#$%;

		document.title = 'Index of '+dir.name;
		document.getElementById('h1').innerHTML = document.title;
		var children = dir.children;
		
		var sortByName = function(el1, el2){
			return el1.name<el2.name;
		}
		
		var sortByDate = function(el1, el2){
			return el1.lastModified<el2.lastModified;
		}
		
		var sortBySize = function(el1, el2){
			return el1.size<el2.size;
		}
		
		document.getElementById('h1')
		
		
		
		for(var i in children){
			var file = children[i];
			var size = file.size || '-';

			if(file.size){
				if(size<1024){
					;
				}else if(size>=1024 && size<1048576){
					size = (Math.round(size/102.4)/10) +'K';
				}else if (size>=1048576 && size<1073741824){
					size = (Math.round(size/104857.6)/10) +'M';
				} else {
					size = (Math.round(size/107374182.4)/10) +'G';
				}
			}
			
			var html = 	'<tr><td><a href="'+file.name+(file.isFile?'':'/')+'">'+file.name+(file.isFile?'':'/')+'</a>'+
						'</td><td align="right">'+file.lastModified.replace('T', ' at ').replace('Z', '').replace('.000','')+
						'</td><td align="right">'+size+
						'</td></tr>';
			document.getElementById('table').innerHTML += html;
		}
		
		
	</script>
</html>  
